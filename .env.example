# M3U Streaming Proxy Configuration

# Server Configuration
HOST=0.0.0.0
PORT=8085
LOG_LEVEL=INFO
APP_DEBUG=false

# Paths
TEMP_DIR=/tmp/m3u-proxy-streams
LOG_FILE=m3u-proxy.log

# API Authentication
# Set this to require API token authentication for management endpoints
# Leave unset or empty to disable authentication
# API_TOKEN=abc123

# Redis Configuration for pooling and multi-worker coordination
REDIS_HOST=localhost
REDIS_SERVER_PORT=6379
REDIS_DB=0
# Set to true to enable Redis pooling (requires Redis server running)
REDIS_ENABLED=false
# Enable transcoding process sharing across clients
ENABLE_TRANSCODING_POOLING=true

# Strict Live TS Mode Configuration
# Enable strict mode for improved live MPEG-TS stream stability (Kodi PVR, etc.)
# Fixes "1 second play → cache → repeat" issues with live TV streams
STRICT_LIVE_TS=false
# Pre-buffer size in bytes (256KB default = ~0.5-1s of data)
STRICT_LIVE_TS_PREBUFFER_SIZE=262144
# Circuit breaker timeout - mark upstream as bad after N seconds of no data
STRICT_LIVE_TS_CIRCUIT_BREAKER_TIMEOUT=2
# How long to avoid a failed upstream before retrying (seconds)
STRICT_LIVE_TS_CIRCUIT_BREAKER_COOLDOWN=60
# Maximum time to wait for pre-buffer to complete (seconds)
STRICT_LIVE_TS_PREBUFFER_TIMEOUT=10
# Low-Latency HLS (LL-HLS) Configuration
# Enable LL-HLS optimizations for reduced latency
LL_HLS_ENABLED=false
# HLS segment duration in seconds (1-6 recommended, lower = lower latency)
# Default: 2 (balanced latency), LL-HLS: 1 (ultra-low latency)
LL_HLS_SEGMENT_DURATION=2
# HLS playlist size (number of segments to keep)
# Default: 10 (balanced), LL-HLS: 6 (ultra-low latency)
LL_HLS_PLAYLIST_SIZE=10
# GOP (Group of Pictures) size - should match segment duration * framerate
# Default: 60 (2s * 30fps), LL-HLS: 30 (1s * 30fps)
LL_HLS_GOP_SIZE=60
# Enable HLS segment deletion (managed by HLS_GC if enabled)
# Default: false (let GC handle cleanup)
LL_HLS_DELETE_SEGMENTS=false
# Enable independent segments for better seeking
# Default: true (recommended)
LL_HLS_INDEPENDENT_SEGMENTS=true
# HLS segment type (mpegts or fmp4)
# Default: mpegts (better compatibility)
LL_HLS_SEGMENT_TYPE=mpegts

